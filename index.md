# 1. 版本修订记录

| 版本   | 日期       | 修订人 | 内容 |
| ------ | ---------- | ------ | ---- |
| `V0.1` | `20220613` | 张葵   |      |
|        |            |        |      |
|        |            |        |      |

#  2. 概述

## 2.1 编写目的

本文档是`VR`终端与云终端通过信令服务完成串流的接口文档。主要包含内容:

* `VR`终端与信令服务接口列表
* 信令服务与云终端接口列表
* `VR`终端与云终端接口列表

本文档面向企业内部研发人员等使用

## 2.2 名词解释

* `WebRTC`

> **`WebRTC`**，名称源自**网页即时通信**（英语：Web Real-Time Communication）的缩写，是一个支持网页浏览器进行实时语音对话或视频对话的`API`
>
> `	WebRTC`提供了视频会议的核心技术，包括音视频的采集、编解码、网络传输、显示等功能，并且还支持跨平台：`windows，linux，mac，android`

* `VR终端`

> 泛指面向用户的`VR	`一体机。`VR`一体机就是具备独立处理器，具备独立运算、输入和输出的功能并且同时支持`HDMI`输入的头显（虚拟现实头戴式显示设备）功能不如外接式`VR`头显强大，但是没有连线束缚，自由度更高

* `云终端`

>云终端通常是指云桌面技术的终端设备

* `信令服务`

>`WebRTC`协议中用来转发`SDP`和`ICE`到对等端的网络通信服务（但它不仅仅是转发信息服务。它也是可以被赋予业务含义的服务）

* `SDP`

>`SDP`是session description protocol，会话描述协议。`WebRTC`通过`SDP`协商，告知对端支持的音视频编码类型，编码器参数，音频或者视频的路数，以及与音视频相关的采样率，编码等等，双方根据各自的能力情况，协商出待传输音视频流的具体参数

* `ICE`

>`ICE`的全称是Interactive Connectivity Establishment，即交互式连接建立。它是一种端到端交互的技术，可以让两个终端相互知道对方的公网`IP`，可以不借助一个公网server完成端到端（Peer to peer，`P2P`）的通信

* `P2P`

>`P2P`是英文peer to peer lending（或peer-to-peer）的缩写，意即个人对个人

* `stun/tun服务`

>为了能让`WebRTC`在不同的网络之间穿行，我们就需要穿过防火墙，而且我们还要面对`ISP`所设置的种种限制。所以为了绕开这些限制，以及在接收端的防火墙上打开一个口让媒体通过，我们就需要依赖STUN/TURN服务器，目的是找到一条正确的路径（STUN），或者是作为一个中继服务器用来传输媒体（TURN）

* `datachannel`

>在`webrtc`中通过`DataChannel`，可以实现点对点的消息通信，这些消息和音视频数据是通过同一`udp socket`被发送给对方的，因此也是具备NAT穿透功能的。`DataChannel`可以用来进行聊天消息的发送、点对点传送文件等

* `ws/wss`

>`ws`是`WebSocket`缩写，它是一种双向通信协议,是HTTP协议的升级版,它是长连接
>
>`WSS`（Web Socket Secure）是`WebSocket`的加密版本



##  2.3  参考文档

* `01-终端初始化.vsdx`

* ` 02-启动应用.vsdx`

*  `03-应用退出.vsdx`

* ` 终端及服务端错误码表.md`

* ` 终端外设消息格式说明书.md`

  

# 3. 接口列表

  * 数据统一采用`json`格式
  *  数据统一使用`utf-8`编码

## 3.1 `VR`终端与信令服务接口列表

`VR`终端与信令服务使用`WebSocket`协议进行通信，接口列表如下:

### 3.1.1 `建立WS连接`

* 接口说明

  >调用方向：
  >
  >  * `VR终端`--->信令服务
  >
  >`VR`终端在设备就绪时和信令服务建立`WS`连接，信令服务回应答`open`命令，用于接下来业务数据的通信。连接的时机尽可能要早，做到和应用会话没有关联性（也就是说不会因为不启动应用不建立该连接，启动多个不同的应用使用的是相同的连接（当然这取决于终端的设备的人机交互的形式））

* 请求报文

  >```json
  >{
  >	"txId": "",
  >	"dId": "",
  >	"entryType": "",
  >	"command": {
  >		"type": "open"
  >	}
  >}
  >```
  >
  >
  >
  >| 字段        | 类型   | 必选 | 描述                                                  |
  >| ----------- | ------ | ---- | ----------------------------------------------------- |
  >| `txId`      | string | 是   | 请求`id`                                              |
  >| `dId`       | string | 是   | 终端设备唯一标志                                      |
  >| `entryType` | string | 否   | 入口类型，默认`VR`,终端可不传（主要是用来做场景区分） |
  >| `command`   | object | 是   |                                                       |
  >| `type`      | string | 是   | command的`open`类型，代表业务接口：`VR终端建立ws连接` |
  >
  >



* 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_open",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": null
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                                         |
  > | --------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`    | string | 是   | 请求`id`                                                     |
  > | `command` | object | 是   |                                                              |
  > | `type`    | string | 是   | command的response_open类型，代表响应`VR终端建立ws连接`的业务接口 |
  > | `data`    | object | 是   |                                                              |
  > | `code`    | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`     | string | 否   | `code`对应的补充说明                                         |
  > | `data`    | object | 否   | `null`                                                       |
  >
  > 

### 3.1.2 `心跳上报`

- 接口说明

  > 调用方向：
  >
  >  * `VR终端`--->信令服务
  >
  > `VR`终端每隔`5s`(可配置)发送一次业务心跳给信令，信令服务会进行心跳应答，主要是为了确定终端的网络状态是否可用，当然后期也可以通过心跳上报终端的其他业务状态数据。`VR`端和信令服务，在检测到超过3个心跳没有应答时，要进行相应的推出逻辑

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "heartbeat"
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                            |
  > | --------- | ------ | ---- | ----------------------------------------------- |
  > | `txId`    | string | 是   | 请求`id`                                        |
  > | `command` | object | 是   |                                                 |
  > | `type`    | string | 是   | command的heartbeat类型，代表业务接口:`心跳上报` |
  >
  > 



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_heartbeat",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": null
  > 		}
  > 	}
  > }
  > ```
  >
  > 
  >
  > | 字段      | 类型   | 必选 | 描述                                                         |
  > | --------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`    | string | 是   | 请求`id`                                                     |
  > | `command` | object | 是   |                                                              |
  > | `type`    | string | 是   | command的response_heartbeat类型，代表响应`心跳上报`业务接口  |
  > | `data`    | object | 是   |                                                              |
  > | `code`    | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`     | string | 否   | `code`对应的补充说明                                         |
  > | `data`    | object | 否   | `null`                                                       |

### 3.1.3 `启动应用`

- 接口说明

  > 调用方向：
  >
  >  * `VR终端`--->信令服务
  >
  > `VR`终端启动游戏接口。信令服务收到启动应用命令，会进行资源调度、会话临时保存、发送命令给指定的云终端，保存会话等。应用启动成功后信令服务会应答`VR`终端

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "startApp",
  > 		"data": {
  > 			"appId": "",
  > 			"zoneId": "",
  > 			"dId": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                              |
  > | --------- | ------ | ---- | ------------------------------------------------- |
  > | `txId`    | string | 是   | 请求`id`                                          |
  > | `command` | object | 是   |                                                   |
  > | `type`    | string | 是   | command的`startApp`类型，代表业务接口：`启动应用` |
  > | `appId`   | string | 是   | 应用`id`                                          |
  > | `zodeId`  | string | 否   | 区域`id`，目前暂无区域划分                        |
  > | `dId`     | string | 否   | 云终端`id`，用于指定云终端启动应用                |
  >
  > 



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_startApp",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": {
  > 				"sessionId": ""
  > 			}
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                         |
  > | ----------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                                     |
  > | `command`   | object | 是   |                                                              |
  > | `type`      | string | 是   | command的`response_startApp`类型，代表响应`启动应用`业务接口 |
  > | `data`      | object | 是   |                                                              |
  > | `code`      | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`       | string | 否   | `code`对应的补充说明                                         |
  > | `data`      | object | 是   |                                                              |
  > | `sessionId` | string | 是   | 用户某次启动应用的会话`id`                                   |
  >
  > 

### 3.1.4 `SDP/ICE转发`

- 接口说明

  > 调用方向：
  >
  >  * `VR终端`--->信令服务--->云终端
  >
  > 当`VR`终端收到应用启动成功的消息后，会开启`SDP/ICE`流程，`VR`终端会把消息传达给信令服务，信令服务会转发给指定的云终端，云终端收到该类型消息也应该自动触发`SDP/ICE`流程。该接口信令服务无对应的应答报文

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "msgForward",
  > 		"data": {
  > 			 "type": "sdp_offer/ice",
  >            	"sessionId": "",
  > 			 "data": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                   |
  > | ----------- | ------ | ---- | ------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                               |
  > | `command`   | object | 是   |                                                        |
  > | `type`      | string | 是   | command的`msgForward`类型，代表业务接口：`SDP/ICE转发` |
  > | `data`      | string | 是   |                                                        |
  > | `type`      | string | 是   | 两种类型，`sdp_offer`或者`ice`                         |
  > | `sessionId` | string | 是   | 终端会话`id`                                           |
  > | `data`      | string | 是   | `sdp_offer`或者`ice`的信息                             |
  >
  > 



- 应答报文

  > 无
  > 
  > 

### 3.1.5 `停止应用`

- 接口说明

  > 调用方向：
  >
  > * `VR`终端--->信令服务--->云终端
  > *  信令服务--->`VR`终端
  > * `云终端`--->信令服务--->`VR`终端
  >
  > 用户主动退出应用场景，`VR`终端调用该接口通知信令服务停止应用，信令服务不会应答退出消息，因此`VR`终端发送完消息后，将自动进行资源释放操作
  >
  > 信令服务检测到终端心跳超时，或者云终端检测到`VR`终端心跳超时，信令服务会主动推送该消息到`VR`终端，`VR`终端收到消息后，将自动进行资源释放操作

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "stopApp",
  > 		"data": {
  > 		  "sessionId": "",
  >             "exitCode": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                         |
  > | ----------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                                     |
  > | `command`   | object | 是   |                                                              |
  > | `type`      | string | 是   | command的`stopApp`类型，代表`停止应用`业务接口               |
  > | `data`      | object | 是   |                                                              |
  > | `exitCode`  | string | 是   | 退出码，0为用户主动退出，其它为非主动退出，详情参考`终端及服务端错误码表.md` |
  > | `sessionId` | string | 是   | 终端会话`id`                                                 |
  >
  > 



- 应答报文

  > 无

## 3.2 信令服务与云终端接口列表

### 3.2.1 `建立WS连接`

- 接口说明

  > 云终端在设备就绪时和信令服务建立`WS`连接，信令服务回应答`connect`命令，用于接下来业务数据的通信。连接的时机尽可能要早，做到和应用会话没有关联性（也就是说不会因为不启动应用不建立该连接，启动多个不同的应用使用的是相同的连接）

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"dId": "",
  > 	"command": {
  > 		"type": "connect"
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                                     |
  > | --------- | ------ | ---- | -------------------------------------------------------- |
  > | `txId`    | string | 是   | 请求`id`                                                 |
  > | `dId`     | string | 是   | 终端设备唯一标志                                         |
  > | `command` | object | 是   |                                                          |
  > | `type`    | string | 是   | command的`connect`类型，代表业务接口：`云终端建立WS连接` |



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_connect",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": null
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                                         |
  > | --------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`    | string | 是   | 请求`id`                                                     |
  > | `command` | object | 是   |                                                              |
  > | `type`    | string | 是   | command的response_connect类型，代表响应`云终端建立WS连接`的业务接口 |
  > | `data`    | object | 是   |                                                              |
  > | `code`    | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`     | string | 否   | `code`对应的补充说明                                         |
  > | `data`    | object | 否   | `null`                                                       |
  >
  > 

### 3.2.2 `心跳(资源)上报`

- 接口说明

  > 调用方向：
  >
  >  * `云终端`--->信令服务
  >
  > 云终端每隔`5s`(可配置)发送一次业务心跳给信令，信令服务会进行心跳应答，主要是为了确定终端的网络状态是否可用，以及资源状态。信令服务会依照此接口在内部维护资源池，进行资源调度。`VR`端和信令服务，在检测到超过3个心跳没有应答时，要进行相应的推出逻辑

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "heartbeat",
  > 		"data": {
  > 			"dIdStatus": "",
  > 			"appIdList": [],
  > 			"zoneId": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型         | 必选 | 描述                                                         |
  > | ----------- | ------------ | ---- | ------------------------------------------------------------ |
  > | `txId`      | string       | 是   | 请求`id`                                                     |
  > | `command`   | object       | 是   |                                                              |
  > | `type`      | string       | 是   | command的heartbeat类型，代表业务接口:`心跳上报`              |
  > | `data`      | object       | 是   |                                                              |
  > | `dIdStatus` | string       | 是   | 云终端资源状态，目前有以下状态：  "0":空闲  "1":已启动  "2" 已预分配 "3" 启动中  "4" 停止中 "5" 已锁定 |
  > | `appIdList` | string array | 是   | 该云终端安装的应用列表集（`appId`）                          |
  > | `zoneId`    | string       | 是   | 该云终端所属的地理区域，目前暂无规划                         |



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_heartbeat",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": null
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段      | 类型   | 必选 | 描述                                                         |
  > | --------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`    | string | 是   | 请求`id`                                                     |
  > | `command` | object | 是   |                                                              |
  > | `type`    | string | 是   | command的response_heartbeat类型，代表响应`心跳上报`业务接口  |
  > | `data`    | object | 是   |                                                              |
  > | `code`    | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`     | string | 否   | `code`对应的补充说明                                         |
  > | `data`    | object | 否   | `null`                                                       |

### 3.2.3 `启动应用`

- 接口说明

  > 调用方向：
  >
  >  * 信令服务--->云终端
  >
  > 信令服务收到`VR终端`启动应用命令后，会进行资源调度、会话临时保存、然后发送启动命令给指定的云终端，保存会话等操作，云终端要负责拉起应用，并保存应用的相关会话。应用启动成功后云终端会应答信令服务

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "startApp",
  > 		"data": {
  > 			"appId": "", 
  >        	   "sessionId":""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                              |
  > | ----------- | ------ | ---- | ------------------------------------------------- |
  > | `txId`      | string | 是   | 请求`id`                                          |
  > | `command`   | object | 是   |                                                   |
  > | `type`      | string | 是   | command的`startApp`类型，代表业务接口：`启动应用` |
  > | `appId`     | string | 是   | 应用`id`                                          |
  > | `sessionId` | string | 是   | 本次启动的会话id                                  |
  >
  > 



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "response_startApp",
  > 		"data": {
  > 			"code": "",
  > 			"msg": "",
  > 			"data": {
  > 			       "sessionId": ""
  > 			}
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                         |
  > | ----------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                                     |
  > | `command`   | object | 是   |                                                              |
  > | `type`      | string | 是   | command的`response_startApp`类型，代表响应`启动应用`业务接口 |
  > | `data`      | object | 是   |                                                              |
  > | `code`      | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`       | string | 否   | `code`对应的补充说明                                         |
  > | `data`      | object | 是   |                                                              |
  > | `sessionId` | string | 是   | 用户某次启动应用的会话`id`                                   |
  >
  > 

### 3.2.4 `SDP/ICE转发`

- 接口说明

  > 调用方向：
  >
  >  * 云终端--->信令服务--->`VR终端`
  >
  > 当云终端收到信令服务的`SDP/ICE`类型的消息时，首选进行消息处理，最后也应该自动触发`SDP/ICE`流程把自身的`SDP/ICE`消息转发给`VR`终端。该接口信令服务无对应的应答报文

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "msgForward",
  > 		"data": {
  > 			"type": "sdp_offer/ice",
  > 			"sessionId": "",
  > 			"data": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                   |
  > | ----------- | ------ | ---- | ------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                               |
  > | `command`   | object | 是   |                                                        |
  > | `type`      | string | 是   | command的`msgForward`类型，代表业务接口：`SDP/ICE转发` |
  > | `data`      | string | 是   |                                                        |
  > | `type`      | string | 是   | 两种类型，`sdp_offer`或者`ice`                         |
  > | `sessionId` | string | 是   | 终端会话`id`                                           |
  > | `data`      | string | 是   | `sdp_offer`或者`ice`的信息                             |



- 应答报文

  > 无

### 3.2.5 `停止应用`

- 接口说明

  > 调用方向：
  >
  > * `VR`终端--->信令服务--->云终端
  > *  信令服务--->云终端
  > * `云终端`--->信令服务--->`VR`终端
  >
  > 用户主动退出应用场景|信令服务检测到云终端心跳超时，信令服务处理完内部逻辑，会将停止应用消息发给云终端，或者云终端检测到`VR`终端心跳超时等场景，云终端监听到此事件发生，将自动进行资源释放操作，然后会`主动发送给信令服务一次心跳进行资源上报`。该接口无应答报文

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"command": {
  > 		"type": "stopApp",
  > 		"data": {
  > 			"sessionId": "",
  > 			"exitCode": ""
  > 		}
  > 	}
  > }
  > ```
  >
  > | 字段        | 类型   | 必选 | 描述                                                         |
  > | ----------- | ------ | ---- | ------------------------------------------------------------ |
  > | `txId`      | string | 是   | 请求`id`                                                     |
  > | `command`   | object | 是   |                                                              |
  > | `type`      | string | 是   | command的`stopApp`类型，代表`停止应用`业务接口               |
  > | `data`      | object | 是   |                                                              |
  > | `exitCode`  | string | 是   | 退出码，0为用户主动退出，其它为非主动退出，详情参考`终端及服务端错误码表.md` |
  > | `sessionId` | string | 是   | 终端会话`id`                                                 |
  >
  > 



- 应答报文

  > 无





## 3.3 `VR`终端与云终端接口列表

### 3.3.1 `P2P心跳`

- 接口说明

  > 调用方向：
  >
  > >* `VR`终端--->云终端
  >
  > `VR`终端与云终端完成`p2p`的过程后，`VR`终端每隔5/s向云终端`发送心跳`，数据通过`datachannel`发送给对方，心跳消息有对应的应答报文，可以用来检测`datachannel`的时延(但要注意每次心跳的`txId`都要不一样才有意义)。双端都会检测，超过3个心跳的时间窗口没有收到对方的心跳，那么认为连接不可用，触发终端停止应用场景。

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"dataType": "heartbeat",
  > 	"data": {
  > 		"sessionId": ""
  > 	}
  > }    
  > ```
  >
  > | 字段       | 类型   | 必选 | 描述                                            |
  > | ---------- | ------ | ---- | ----------------------------------------------- |
  > | `dataType` | string | 是   | `heartbeat`代表是心跳数据，和外设数据是区分开的 |
  > | `data`     | object | 是   | `sessionId`会话id                               |



- 应答报文

  > ```json
  > {
  > 	"txId": "",
  > 	"dataType": "response_heartbeat",
  > 	"data": {
  > 		"code": "",
  > 		"msg": "",
  > 		"data": null
  > 	}
  > }
  > 
  > ```
  >
  >  
  >
  > | 字段       | 类型   | 必选 | 描述                                                         |
  > | ---------- | ------ | ---- | ------------------------------------------------------------ |
  > | `dataType` | string | 是   | command的`response_heartbeat`类型，代表响应`VR终端`心跳      |
  > | `data`     | object | 是   |                                                              |
  > | `code`     | string | 是   | 返回码，0为正常，其它为非正常，详情参考`终端及服务端错误码表.md` |
  > | `msg`      | string | 否   | `code`对应的补充说明                                         |
  > | `data`     | string | 是   | `null`                                                       |
  >
  >   
  >
  > 

### 3.3.2 `外设上行`

- 接口说明

  > 调用方向：`VR`终端--->云终端
  >
  > `VR`终端与云终端完成`p2p`的过程后，`VR`终端与云终端的操作信令，将通过`datachannel`发送给对方。

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"dataType": "",
  > 	"data": {
  > 
  > 	}
  > }
  > ```
  >
  > | 字段       | 类型   | 必选 | 描述                                                         |
  > | ---------- | ------ | ---- | ------------------------------------------------------------ |
  > | `dataType` | string | 是   | 外设类型，该值参考终`端外设消息格式说明书.md`中的`eDeviceType` |
  > | `data`     | object | 是   | 具体外设的消息，请参考`端外设消息格式说明书.md`              |



- 应答报文

  > 无

### 3.3.3 `外设下行`

- 接口说明

  > 调用方向：云终端--->`VR`终端
  >
  > `VR`终端与云终端完成`p2p`的过程后，云终端与`VR`终端的`部分`业务信令、外设（手柄，扬声器等），将通过`datachannel`发送给对方。

- 请求报文

  > ```json
  > {
  > 	"txId": "",
  > 	"dataType": "",
  > 	"data": {
  > 
  > 	}
  > }
  > ```
  >
  > | 字段       | 类型   | 必选 | 描述                                                         |
  > | ---------- | ------ | ---- | ------------------------------------------------------------ |
  > | `dataType` | string | 是   | 外设类型，该值参考终`终端外设消息格式说明书.md`中的`eDeviceType` |
  > | `data`     | object | 是   | 具体外设的消息，请参考`终端外设消息格式说明书.md`            |



- 应答报文

  > 无

# 4. 附录	

## 4.1 外设数据格式

详情参考：`终端外设消息格式说明书.md`

## 4.2 返回码定义

详情参考：`终端及服务端错误码表.md`



